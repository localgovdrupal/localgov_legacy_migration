langcode: en
status: true
dependencies:
  module:
    - localgov_services_landing
id: service_landing
migration_group: localgov_services
label: 'Services - landing page'
migration_tags:
  - localgov_content_type
source:
  plugin: d8_entity_path
  key: migration
  entity_type: node
  bundle: service_hub
  include_translations: false
  track_changes: true
process:
  nid: nid
  uuid: uuid
  uid: uid
  status: status
  created: created
  changed: changed
  comment: comment
  title: title
  body:
    -
      plugin: sub_process
      source: body
      process:
        value: value
        format:
          -
            plugin: default_value
            default_value: wysiwyg
        summary: summary
  localgov_address: field_address
  localgov_destinations: field_destinations
  localgov_contact_us_online: field_contact_us_online
  localgov_email_address: field_email_address
  localgov_facebook: field_facebook
  localgov_address_first_line: field_address_first_line
  localgov_hearing_difficulties_phone: field_hearing_difficulties_phone
  localgov_link_to_map:
    -
      plugin: sub_process
      source: field_link_to_map
      process:
        uri: uri
        title: title
        options:
          -
            plugin: callback
            source: options
            callable: unserialize
  localgov_opening_hours: field_opening_hours
  localgov_other_team_contacts: field_other_team_contacts
  localgov_phone: field_phone
  localgov_popular_topics: field_popular_topics
  localgov_common_tasks:
      -
        plugin: sub_process
        source: field_common_tasks
        process:
          uri: uri
          title: title
          options:
            -
              plugin: callback
              source: options
              callable: unserialize
  localgov_twitter: field_twitter
  # Custom BHCC fields for portals.
  bhcc_portal_enable_portal: field_portal_enable_portal
  bhcc_portal_banner: field_portal_banner
  bhcc_portal_colour_scheme: field_portal_colour_scheme
  bhcc_portal_enable_sidebar: field_portal_enable_sidebar
  bhcc_portal_menubar: field_portal_menubar
  bhcc_portal_tiles: field_portal_tiles
  bhcc_show_body: field_show_body
  # Disable pathauto for alias migration.
  'path/pathauto':
    plugin: default_value
    default_value: 0
  'path/alias': alias
  # Workflow content moderation state.
  # moderation_state: moderation_state
  # Alternative Workflow content moderation state.
  # Uncomment the following (and comment out the above) if the source site did
  # not have workflow / content moderation switched on for this content type
  moderation_state:
    -
      plugin: static_map
      source: status
      default_value: draft
      map:
        '0': draft
        '1': published
destination:
  plugin: 'entity:node'
  default_bundle: localgov_services_landing
migration_dependencies:
  optional:
    - users
    - paragraph_portal_tile
